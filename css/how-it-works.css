/* how-it-works.css — vyčištěná a optimalizovaná verze (bez :root) */

/* KONTEJNER */
.hiw-section { display:flex; justify-content:center; padding:60px 16px; }

/* PAPER WRAP */
.hiw-paper-wrap{
  width: min(1200px,96%);
  position:relative;
  background-image:
    radial-gradient(800px 280px at 10% 10%, rgba(248,230,176,0.06), transparent 18%),
    radial-gradient(700px 220px at 85% 12%, rgba(207,155,60,0.04), transparent 16%),
    url('/assets/paper-texture.png');
  background-position: center;
  background-size: 100% 100%;
  background-repeat: no-repeat;
  border-radius: 10px;
  padding: 56px;
  box-shadow:
    0 40px 90px rgba(0,0,0,0.16),
    inset 0 18px 40px rgba(0,0,0,0.13),
    inset 0 0 140px rgba(0,0,0,0.06);
  overflow: visible;
  -webkit-font-smoothing:antialiased;
}

/* burnt edges + rim highlight */
.hiw-paper-wrap::before{
  content:"";
  position:absolute; inset:0;
  z-index:2; border-radius:10px; pointer-events:none;
  background:
    radial-gradient(120px 80px at 6% 6%, rgba(0,0,0,0.28), rgba(0,0,0,0) 40%),
    radial-gradient(120px 80px at 94% 94%, rgba(0,0,0,0.24), rgba(0,0,0,0) 40%),
    linear-gradient(to top, rgba(0,0,0,0.18), rgba(0,0,0,0) 14%) top/100% 26px no-repeat,
    linear-gradient(to bottom, rgba(0,0,0,0.18), rgba(0,0,0,0) 14%) bottom/100% 26px no-repeat,
    linear-gradient(to left, rgba(0,0,0,0.14), rgba(0,0,0,0) 14%) left/26px 100% no-repeat,
    linear-gradient(to right, rgba(0,0,0,0.14), rgba(0,0,0,0) 14%) right/26px 100% no-repeat;
  mix-blend-mode:multiply;
}
.hiw-paper-wrap::after{
  content:"";
  position:absolute; inset:0;
  z-index:3; pointer-events:none;
  background:
    radial-gradient(900px 300px at 85% 10%, rgba(255,230,170,0.18), transparent 16%),
    linear-gradient(180deg, rgba(255,255,255,0.02), transparent 10%);
  background-repeat:no-repeat;
  background-position:center, top;
  background-size:100% 60%, 100% 15%;
  mix-blend-mode:screen; filter: blur(4px) contrast(1.02);
}

/* grain & inner edge */
.hiw-grain-overlay{
  position:absolute; inset:0;
  z-index:4; pointer-events:none;
  background-image:
    radial-gradient(circle at 20% 10%, rgba(0,0,0,0.02) 0 1px, transparent 1px),
    radial-gradient(circle at 80% 90%, rgba(0,0,0,0.02) 0 1px, transparent 1px);
  background-size:3px 3px,4px 4px;
  opacity:0.06; mix-blend-mode:multiply; transform:translateZ(0);
}
.hiw-paper-edge{
  position:absolute; inset:10px;
  border-radius:8px; z-index:5; pointer-events:none;
  box-shadow: inset 0 6px 0 rgba(255,245,230,0.06), inset 0 -8px 18px rgba(0,0,0,0.08);
}

/* container + header */
.hiw-container{ position:relative; z-index:6; }
.hiw-head{ text-align:center; margin-bottom:18px; }
.hiw-title{
  font-family:"Playfair Display",serif;
  font-size:2.6rem;
  color:#3b2a1a;
  margin:0 0 8px;
  font-weight:900;
  letter-spacing: -0.02em;
  line-height:1.02;
  text-rendering:optimizeLegibility;
  position:relative;
}
.hiw-title::after{
  content:"";
  display:block; height:6px; width:68px; margin:10px auto 0;
  border-radius:4px;
  background: linear-gradient(90deg,#f8e7b0,#cf9b3a);
  box-shadow: 0 6px 18px rgba(207,155,60,0.14);
  opacity:0.95;
}
.hiw-sub{
  margin:0; color:rgba(59,42,26,0.86);
  font-weight:700; max-width:780px;
  margin-left:auto; margin-right:auto;
}

/* CTA */
.hiw-cta-wrap{ margin-top:14px; display:flex; justify-content:center; }
.hiw-cta{
  display:inline-block;
  padding:14px 28px;
  border-radius:16px;
  font-weight:900;
  text-decoration:none;
  color:#2b1f0f;
  background: linear-gradient(90deg,#f8e7b0,#cf9b3a);
  box-shadow:
    0 12px 40px rgba(207,155,60,0.20),
    0 2px 0 rgba(255,255,255,0.06) inset;
  position:relative;
  overflow:visible;
  transform:translateZ(0);
  transition: transform .18s ease, box-shadow .18s ease;
  text-shadow: 0 1px 0 rgba(255,255,255,0.12);
}
.hiw-cta::before{
  content:"";
  position:absolute; left:50%; top:50%;
  transform:translate(-50%,-50%);
  width:140%; height:140%; border-radius:22px; z-index:-1;
  background: radial-gradient(ellipse at center, rgba(248,231,176,0.18), transparent 35%);
  filter: blur(10px); opacity:0.9; transition: opacity .18s ease;
}
.hiw-cta:hover{
  transform:translateY(-6px) scale(1.02);
  box-shadow: 0 30px 80px rgba(207,155,60,0.26);
}
@media (prefers-reduced-motion:reduce){
  .hiw-cta, .hiw-cta::before { transition:none !important; animation:none !important; }
}

/* ===== HOW IT WORKS steps container ===== */
.hiw-steps {
  display: grid;
  grid-template-columns: repeat(4, minmax(220px, 1fr));
  gap: 22px;
  margin-top: 22px;
  padding: 34px;
  border-radius: 18px;
  position: relative;
  overflow: visible;
  background: linear-gradient(90deg, rgba(192, 138, 46, 0.18) 0%, rgba(255, 230, 180, 0.25) 50%, rgba(192, 138, 46, 0.18) 100%);
  border-top: 6px solid #c08a2e;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}
.hiw-steps::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url('/images/parchment-grain.png');
  background-size: 700px 700px;
  opacity: 0.03;
  pointer-events: none;
  z-index: 1;
}
.hiw-steps::before {
  content: "";
  position: absolute;
  left: 6%; right: 6%;
  top: 52%; height: 2px;
  background: linear-gradient(90deg, transparent 0%, rgba(20,12,6,0.03) 20%, rgba(185,135,50,0.10) 48%, transparent 100%);
  transform: translateY(-50%);
  pointer-events: none;
  z-index: 2;
}
@media (max-width:1200px) { .hiw-steps::before { display: none; } }

/* ===== Per-card unified ===== */
.hiw-step {
  position: relative;
  z-index: 4;
  padding: 26px 18px;
  border-radius: 14px;
  overflow: visible;
  text-align: center;
  border: 1px solid rgba(80,60,34,0.06);
  border-left: 6px solid #c08a2e;
  background:
    linear-gradient(90deg, rgba(212,160,23,0.12) 0%, rgba(212,160,23,0.06) 30%, transparent 70%),
    linear-gradient(180deg, rgba(255,255,255,0.025), rgba(0,0,0,0.03)),
    linear-gradient(180deg, #efe7c8 0%, #e7d29a 100%);
  box-shadow:
    0 28px 60px rgba(18,12,6,0.14),
    inset 0 -12px 28px rgba(230,200,120,0.03);
  transition: transform .28s cubic-bezier(.2,.9,.3,1), box-shadow .28s ease, border-left-color .28s ease;
}
.hiw-step::after {
  content: "";
  position: absolute;
  top: 12px; right: 12px;
  z-index: 8;
  width: 56px; height: 10px;
  border-radius: 6px;
  background: linear-gradient(90deg, rgba(255,240,200,0.8), rgba(255,185,85,0.9));
  box-shadow: 0 4px 10px rgba(207,155,60,0.25);
  transform: rotate(12deg);
  opacity: 0.9;
  pointer-events: none;
}
.hiw-step::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  z-index: 2;
  pointer-events: none;
  background: radial-gradient(280px 100px at 10% 18%, rgba(255,245,210,0.04), transparent 25%);
  mix-blend-mode: screen;
}
.hiw-step:hover {
  transform: translateY(-8px);
  border-left-color: #be7f18;
  box-shadow:
    0 44px 80px rgba(18,12,6,0.20),
    inset 0 -18px 40px rgba(230,190,100,0.05);
}
.hiw-step .divider {
  height: 1px;
  margin: 18px 12%;
  background: linear-gradient(90deg, rgba(20,12,6,0.02), rgba(20,12,6,0.04), rgba(20,12,6,0.02));
  pointer-events: none;
}

/* ===== Icon unified (oprava „čtverečků“) ===== */
.hiw-step-icon {
  width: 76px;
  height: 76px;
  margin: 0 auto 14px;
  border-radius: 50%;
  overflow: hidden;                /* ✅ klíčové pro ořez pseudo-elementů */
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  z-index: 6;
  background: radial-gradient(circle at 30% 30%, #fff4b0 0%, #e7cf98 60%);
  border: 3px solid #c89a12;
  box-shadow:
    0 14px 32px rgba(18,12,6,0.14),
    0 0 26px rgba(212,160,23,0.08),
    inset 0 6px 12px rgba(255,245,210,0.28);
  animation: icon-pulse-v3 6s ease-in-out infinite, icon-tilt-v3 10s ease-in-out infinite;
}
.hiw-step-icon::after {
  content: "";
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  border-radius: inherit;          /* ✅ pseudo-element je taky kulatý */
  background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,0.35) 50%, transparent 100%);
  background-size: 200px 100%;
  animation: icon-shine-v3 8s ease-in-out infinite;
  pointer-events: none;
}
.hiw-step-icon::before {
  content: "";
  position: absolute;
  left: -8px; top: -8px; right: -8px; bottom: -8px;
  border-radius: 50%;
  box-shadow: 0 0 40px rgba(212,160,23,0.10);
  pointer-events: none;
  z-index: -1;
}
/* volitelně zajistí kulatost i pro vnořenou grafiku */
.hiw-step-icon img,
.hiw-step-icon svg {
  display: block;
  max-width: 70%;
  max-height: 70%;
  border-radius: 50%;
}

.hiw-step:hover .hiw-step-icon {
  animation: icon-pulse-v3 4s ease-in-out infinite, icon-tilt-v3 8s ease-in-out infinite;
}

/* Animace */
@keyframes icon-shine-v3 {
  0% { background-position: -150px 0; }
  50% { background-position: 150px 0; }
  100% { background-position: 300px 0; }
}
@keyframes icon-pulse-v3 {
  0%, 100% { box-shadow: 0 0 10px rgba(255, 200, 100, 0.3); }
  50% { box-shadow: 0 0 20px rgba(255, 210, 130, 0.55); }
}
@keyframes icon-tilt-v3 {
  0%, 100% { transform: rotateY(0deg) rotateX(0deg); }
  50% { transform: rotateY(1.5deg) rotateX(-0.5deg); }
}

/* TEXT */
.hiw-step-text{
  margin:0; color:rgba(59,42,26,0.92);
  line-height:1.4; font-weight:600;
  font-size:0.96rem;
}
.hiw-step code{
  background: rgba(0,0,0,0.04);
  padding:2px 6px; border-radius:6px;
  font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
  font-size:.95em;
}

/* responsiveness: 4 / 3 / 2 / 1 */
@media (max-width:1100px){
  .hiw-steps{ grid-template-columns: repeat(3, minmax(200px, 1fr)); padding: 28px; }
}
@media (max-width:820px){
  .hiw-steps{ grid-template-columns: repeat(2, minmax(200px, 1fr)); padding: 20px; gap:16px; }
}
@media (max-width:480px){
  .hiw-steps{ grid-template-columns: 1fr; padding: 16px; gap:12px; }
  .hiw-step-icon{ width:56px; height:56px; font-size:22px; }
  .hiw-title{ font-size:1.9rem; }
}

/* accessibility */
@media (prefers-reduced-motion:reduce){
  *{ transition:none !important; animation:none !important; }
  .hiw-cta::before, .hiw-steps::before { display:none !important; }
}