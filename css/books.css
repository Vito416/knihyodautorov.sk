/* books.css — štýl zladený s about sekciou (pergamen, 3D rám, 4/3/2/1 grid)
   Poznámka: papierová textúra sa zámerne roztiahne (background-size: 100% 100%)
*/

/* ========== Root premenné (easy tune) ========== */
:root{
  --paper-bg-tint: rgba(255,240,210,0.035);
  --gold-1: #f8e7b0;
  --gold-2: #cf9b3a;
  --gold-3: #8b5a20;
  --ink: #3b2a1a;
  --deep-shadow: rgba(0,0,0,0.52);
  --warm-light: rgba(255,230,170,0.14);
  --grain-opacity: 0.06;
  --card-radius: 12px;
  --accent-dark: #2b1608;
  --muted: #d9cdb1;
  --transition: 320ms cubic-bezier(.2,.9,.2,1);
  --texture: url('/assets/paper-texture.png');
}

/* ======================== KONTEJNER SEKCE ======================== */
.books-section {
  display: flex;
  justify-content: center;
  padding: 46px 16px;
  background: linear-gradient(180deg, rgba(6,4,3,0.02), rgba(6,4,3,0.02));
  -webkit-font-smoothing:antialiased;
}

/* PAPER WRAP — TEXTÚRA ROZTIAHNUTÁ NA CELÚ PLOCHU */
.books-section .books-paper-wrap {
  width: min(1200px, 96%);
  position: relative;
  background-image: var(--texture);
  background-position: center;
  background-size: 100% 100%; /* <<--- ROZTIAHNE TEXTÚRU (NEZACHOVÁVA POMER) */
  background-repeat: no-repeat;
  border-radius: 12px;
  padding: 34px;
  box-shadow:
    0 30px 70px rgba(0,0,0,0.14),
    inset 0 18px 40px rgba(0,0,0,0.12),
    inset 0 0 120px rgba(0,0,0,0.04);
  overflow: visible;
  z-index: 1;
}

/* burnt edges overlay — zosynchronizované s rozťahovanou textúrou */
.books-section .books-paper-wrap::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 2;
  border-radius: 12px;
  pointer-events: none;
  /* gradienty / tmavé okraje */
  background:
    radial-gradient(160px 110px at 6% 6%, rgba(0,0,0,0.26), rgba(0,0,0,0) 40%),
    radial-gradient(160px 110px at 94% 94%, rgba(0,0,0,0.22), rgba(0,0,0,0) 40%),
    linear-gradient(to top, rgba(0,0,0,0.14), rgba(0,0,0,0) 12%) top/100% 32px no-repeat,
    linear-gradient(to bottom, rgba(0,0,0,0.14), rgba(0,0,0,0) 12%) bottom/100% 32px no-repeat;
  background-position: center;
  background-size: 100% 100%; /* synchronizácia s papierom */
  mix-blend-mode: multiply;
  filter: saturate(0.98);
}

/* rim light (highlight) - jemnejšie, tiež prispôsobené */
.books-section .books-paper-wrap::after {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 3;
  pointer-events: none;
  background:
    radial-gradient(900px 300px at 82% 12%, rgba(255,235,170,0.12), transparent 14%),
    linear-gradient(180deg, rgba(255,255,255,0.02), transparent 10%);
  background-repeat: no-repeat;
  background-position: center, top;
  background-size: 100% 100%, 100% 15%;
  mix-blend-mode: screen;
  filter: blur(3px) contrast(1.02);
}

/* Grain overlay */
.books-section .books-paper-wrap .books-grain-overlay {
  position:absolute; inset:0; z-index:4; pointer-events:none;
  background-image:
    radial-gradient(circle at 20% 10%, rgba(0,0,0,0.02) 0 1px, transparent 1px),
    radial-gradient(circle at 80% 90%, rgba(0,0,0,0.02) 0 1px, transparent 1px);
  background-size: 3px 3px, 4px 4px;
  opacity: var(--grain-opacity);
  mix-blend-mode: multiply;
}

/* inner paper edge (subtle) */
.books-section .books-paper-wrap .books-paper-edge {
  position:absolute; inset: 12px; border-radius:10px; z-index:5; pointer-events:none;
  box-shadow: inset 0 6px 0 rgba(255,245,230,0.05), inset 0 -8px 18px rgba(0,0,0,0.06);
}

/* ======================== HEADER + SEARCH ======================== */
.books-header {
  display:flex; justify-content:space-between; gap:18px; align-items:flex-start;
  margin-bottom:18px; flex-wrap:wrap; position:relative; z-index:6;
  background: rgba(207,152,58,0.09);
  border-left: 6px solid #c08a2e; padding: 18px; border-radius: 8px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}

.section-title {
  font-size: 2.6rem; margin: 0 0 12px 0; font-weight: 800; color: #3e2a12;
  text-shadow: 0 2px 0 rgba(255,255,255,0.12), 0 -2px 8px rgba(0,0,0,0.28);
  -webkit-font-smoothing:antialiased;
}
.section-title span {
  color: transparent;
  background: linear-gradient(180deg,#fff4b0 0%,#ffe066 50%,#ffb84d 100%);
  -webkit-background-clip:text; background-clip:text; font-weight:700;
  filter: drop-shadow(0 1px 1px rgba(0,0,0,0.85));
}

/* search row (centrovane) */
.search-row { display:flex; gap:10px; align-items:center; margin-top:8px; z-index:6; justify-content:center; }

/* unified search — upravene, ladiace s pergamenom */
#unifiedSearch {
  padding: 12px 14px 12px 42px;
  min-width: 260px;
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(255,245,220,0.12), rgba(255,245,220,0.08));
  border: 2px solid rgba(207,152,58,0.65);
  color: var(--ink);
  font-size: 1rem;
  box-shadow: inset 0 2px 6px rgba(0,0,0,0.22);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23cf9b3a' d='M10 2a8 8 0 015.29 13.71l4.15 4.15-1.42 1.42-4.15-4.15A8 8 0 1110 2zm0 2a6 6 0 100 12 6 6 0 000-12z'/%3E%3C/svg%3E");
  background-repeat: no-repeat; background-position: 12px center; background-size: 18px 18px;
  transition: box-shadow var(--transition), transform 120ms, border-color 0.25s ease;
}

#unifiedSearch::placeholder { color: rgba(60,40,20,0.55); }

#unifiedSearch:focus {
  outline:none; border-color: var(--gold-1);
  box-shadow: 0 10px 30px rgba(0,0,0,0.18), 0 0 12px rgba(255,215,100,0.45);
  transform: translateY(-2px);
}

/* promo note small */
.promo-note { color:var(--ink); opacity:0.9; font-weight:600; }

/* ======================== GRID (4/3/2/1) ======================== */
.books-grid {
  display:grid; gap:22px; grid-template-columns: repeat(1,1fr);
  align-items:start; position:relative; z-index:6; transition: all var(--transition);
}
@media (min-width:1200px){ .books-grid{ grid-template-columns: repeat(4,1fr); } }
@media (min-width:900px) and (max-width:1199px){ .books-grid{ grid-template-columns: repeat(3,1fr); } }
@media (min-width:700px) and (max-width:899px){ .books-grid{ grid-template-columns: repeat(2,1fr); } }
@media (max-width:699px){ .books-grid{ grid-template-columns: repeat(1,1fr); } }

/* ======================== KARTA KNIHY ======================== */
/* základ karty */
.book-card { perspective:1200px; transition: transform 420ms ease, opacity 420ms ease; }
.card-inner {
  position:relative; z-index:10;
  background: linear-gradient(180deg, rgba(255,255,255,0.045), rgba(255,255,255,0.01));
  border-radius: var(--card-radius);
  overflow: visible;
  box-shadow:
    0 22px 70px rgba(0,0,0,0.52),
    inset 0 6px 16px rgba(255,255,255,0.02);
  transition: transform var(--transition), box-shadow var(--transition), filter var(--transition);
  display:flex; flex-direction:column;
  min-height:420px;
}

/* epic hover: strong lift + perspective tilt + light sweep */
.card-inner:hover {
  transform: translateY(-14px) rotateX(1.2deg) translateZ(10px);
  box-shadow: 0 48px 140px rgba(0,0,0,0.7);
}
.card-inner::after{
  /* subtle light sweep on hover via transition of opacity - requires JS toggle or hover */
  content:""; position:absolute; inset:0; pointer-events:none;
  background: linear-gradient(120deg, rgba(255,255,255,0.0) 0%, rgba(255,255,255,0.04) 45%, rgba(255,255,255,0.0) 70%);
  opacity:0; transition: opacity 420ms ease;
  border-radius:inherit; z-index:11;
}
.card-inner:hover::after{ opacity:1; }

/* meta badge */
.card-meta { position:absolute; margin:12px; z-index:15; }
.badge { background: rgba(0,0,0,0.48); padding:6px 10px; border-radius:999px; color:#fff; font-weight:800; }

/* COVER + FRAME */
.cover-wrap { position:relative; overflow:visible; padding:14px; display:block; }
.book-cover {
  width:100%; height:320px; object-fit:cover; border-radius:8px;
  display:block; transform-origin:center; transition: transform 520ms cubic-bezier(.2,.9,.2,1), box-shadow var(--transition);
  z-index: 16;
  box-shadow: 0 12px 34px rgba(0,0,0,0.45);
  backface-visibility: hidden;
}

/* decorative gold bevel frame behind cover */
.book-frame {
  position:absolute; inset:18px; border-radius:12px; pointer-events:none; z-index:12;
  background: linear-gradient(180deg, rgba(255,245,220,0.06), rgba(200,140,50,0.02));
  box-shadow:
    inset 0 3px 10px rgba(255,255,255,0.06),
    0 18px 46px rgba(0,0,0,0.55);
  transform: translateZ(-2px);
  transition: transform var(--transition), box-shadow var(--transition);
}

/* tiny ornament (corner) — jemný, bez pozadia (transparent) */
.books-section .ornament {
  position:absolute;
  width: 30px; height: 30px;
  background: url('../assets/ornament-small.png') no-repeat center/contain;
  opacity: 0.78; pointer-events:none;
  filter: drop-shadow(0 4px 6px rgba(0,0,0,0.35));
}
.books-section .ornament.top-right { top: -8px; right: -8px; transform: rotate(18deg) scale(.98); }
.books-section .ornament.bottom-left { bottom: -8px; left: -8px; transform: rotate(-8deg) scale(.98); }

/* ======================== BOOK INFO (text + depth) ======================== */
.card-info {
  padding: 12px 16px 8px; display:flex; flex-direction:column; gap:10px; flex:1; z-index:14;
}

.book-info {
  background: linear-gradient(90deg, rgba(75,48,26,0.86) 0%, rgba(75,48,26,0.0) 80%);
  border-left: 6px solid rgba(207,152,58,0.95);
  padding: 12px 16px;
  border-radius: 6px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.28), inset 0 6px 14px rgba(255,255,255,0.02);
  color: var(--muted);
}

/* title + author styling */
.book-title {
  margin:0; font-size:1.2rem; color: var(--ink); font-weight:900;
  text-shadow: 0 2px 0 rgba(255,245,230,0.12), 0 6px 18px rgba(0,0,0,0.35);
  letter-spacing: 0.2px;
}
.book-author { margin:0; color: var(--gold-3); font-weight:800; opacity:0.95; font-size:0.95rem; }
.book-desc { margin:0; color: var(--ink); opacity:0.9; line-height:1.55; font-size:0.98rem; }

/* subtle divider */
.card-info .meta-row { display:flex; gap:10px; align-items:center; color:rgba(59,42,26,0.8); font-weight:600; font-size:0.9rem; }

/* ======================== ACTIONS (centered) ======================== */
.card-actions, .book-actions {
  display:flex; justify-content:center; gap:12px; padding:12px 16px 18px; z-index:14;
}

.btn {
  padding: 10px 16px; border-radius: 10px; font-weight:800; cursor:pointer;
  transition: transform 180ms ease, box-shadow 220ms ease, background 220ms ease;
  border: none;
}
.btn-view {
  background: linear-gradient(180deg, #2a1a10 0%, #1c1008 100%);
  color: #fff; box-shadow: 0 8px 24px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.03);
}
.btn-download {
  background: linear-gradient(180deg, var(--gold-1), var(--gold-2));
  color: var(--accent-dark); font-weight:900;
  box-shadow: 0 10px 30px rgba(207,152,58,0.18), inset 0 1px 0 rgba(255,255,255,0.16);
}
.btn:hover { transform: translateY(-4px); box-shadow: 0 22px 60px rgba(0,0,0,0.55); }

/* small secondary action (outline) */
.btn-outline {
  background: transparent; border: 1px solid rgba(0,0,0,0.06); color: var(--ink); padding:8px 12px; border-radius:8px;
}

/* ======================== MODAL ======================== */
.book-modal { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(6,4,3,0.6); z-index:99999; padding:20px; }
.book-modal[aria-hidden="false"]{ display:flex; }
.modal-inner {
  width:min(980px,96%); background: linear-gradient(180deg, rgba(255,255,255,0.035), rgba(0,0,0,0.02));
  border-radius:12px; padding:18px; box-shadow: 0 30px 120px rgba(0,0,0,0.75); display:flex; gap:18px; align-items:flex-start;
}
.modal-inner img { width:320px; height:420px; object-fit:cover; border-radius:8px; box-shadow: 0 18px 60px rgba(0,0,0,0.6); }
.modal-inner .modal-info { color:var(--ink); }

/* ======================== RESPONSIVE TWEAKS ======================== */
@media (max-width:1100px){
  .section-title { font-size: 2.2rem; }
  .books-section .books-paper-wrap { padding: 26px; }
}
@media (max-width:900px){
  .card-inner { min-height:360px; }
  .book-cover { height:240px; }
  .modal-inner { flex-direction:column; align-items:center; }
  .modal-inner img { width:100%; height:auto; max-height:420px; }
  .books-section .books-paper-wrap { background-size: 100% 120%; /* jemné natiahnutie na menších obrazovkách */ }
}
@media (max-width:700px){
  .books-grid { grid-template-columns: repeat(1,1fr); gap:18px; }
  .card-inner { min-height: auto; }
  .book-cover { height: 320px; }
  .book-frame { inset: 16px; }
}

/* ======================== MISC / ACCESSIBILITY ======================== */
.no-books { padding:26px; color:var(--ink); background: rgba(255,255,255,0.02); border-radius:8px; text-align:center; box-shadow: inset 0 1px 0 rgba(255,255,255,0.02); }

/* reduced motion */
@media (prefers-reduced-motion: reduce){
  * { transition: none !important; animation: none !important; transform:none !important; }
}
