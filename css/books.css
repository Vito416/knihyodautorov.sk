/* books.css — štýl zladený s about sekciou (pergamen, 3D rám, 4/3/2/1 grid) */

/* ========== Root premenné (easy tune) ========== */
:root{
  --paper-bg-tint: rgba(255,240,210,0.035);
  --gold-1: #f8e7b0;
  --gold-2: #cf9b3a;
  --gold-3: #8b5a20;
  --ink: #3b2a1a;
  --deep-shadow: rgba(0,0,0,0.45);
  --warm-light: rgba(255,230,170,0.12);
  --grain-opacity: 0.06;
  --card-radius: 12px;
  --accent-dark: #2b1608;
  --muted: #d9cdb1;
  --transition: 320ms cubic-bezier(.2,.9,.2,1);
  --texture: url('/assets/paper-texture.png'); /* uprav podľa svojho */
}

/* ======================== KONTEJNER SEKCE ======================== */
.books-section {
  display: flex;
  justify-content: center;
  padding: 46px 16px;
  background: linear-gradient(180deg, rgba(6,4,3,0.02), rgba(6,4,3,0.02)); /* jemný page tint */
}

/* PAPER WRAP (kľúčové - ako v about) */
.books-section .paper-wrap {
  width: min(1200px, 96%);
  position: relative;
  background-image: var(--texture);
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
  border-radius: 12px;
  padding: 34px;
  box-shadow:
    0 30px 70px rgba(0,0,0,0.14),
    inset 0 18px 40px rgba(0,0,0,0.12),
    inset 0 0 120px rgba(0,0,0,0.04);
  overflow: visible;
  z-index: 1;
}

/* burnt edges overlay (tmavšie okraje) */
.books-section .paper-wrap::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 2;
  border-radius: 12px;
  pointer-events: none;
  background:
    radial-gradient(130px 90px at 6% 6%, rgba(0,0,0,0.22), rgba(0,0,0,0) 40%),
    radial-gradient(130px 90px at 94% 94%, rgba(0,0,0,0.18), rgba(0,0,0,0) 40%),
    linear-gradient(to top, rgba(0,0,0,0.12), rgba(0,0,0,0) 10%) top/100% 26px no-repeat,
    linear-gradient(to bottom, rgba(0,0,0,0.12), rgba(0,0,0,0) 10%) bottom/100% 26px no-repeat;
  mix-blend-mode: multiply;
}

/* rim light (highlight) - jemnejší než predtým */
.books-section .paper-wrap::after {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 3;
  pointer-events: none;
  background:
    radial-gradient(900px 300px at 85% 10%, rgba(255,230,170,0.12), transparent 14%),
    linear-gradient(180deg, rgba(255,255,255,0.01), transparent 10%);
  background-repeat: no-repeat;
  background-position: center, top;
  background-size: 100% 60%, 100% 15%;
  mix-blend-mode: screen;
  filter: blur(3px) contrast(1.02);
}

/* Grain overlay */
.books-section .paper-wrap .grain-overlay {
  position: absolute;
  inset: 0;
  z-index: 4;
  pointer-events: none;
  background-image:
    radial-gradient(circle at 20% 10%, rgba(0,0,0,0.02) 0 1px, transparent 1px),
    radial-gradient(circle at 80% 90%, rgba(0,0,0,0.02) 0 1px, transparent 1px);
  background-size: 3px 3px, 4px 4px;
  opacity: var(--grain-opacity);
  mix-blend-mode: multiply;
  transform: translateZ(0);
}

/* optional inner edge */
.books-section .paper-wrap .paper-edge {
  position: absolute;
  inset: 10px;
  border-radius: 8px;
  box-shadow: inset 0 6px 0 rgba(255,245,230,0.04), inset 0 -8px 18px rgba(0,0,0,0.06);
  pointer-events: none;
  z-index: 5;
}

/* ======================== HEADER + SEARCH ======================== */
.books-header {
  display:flex;
  justify-content:space-between;
  gap:18px;
  align-items:flex-start;
  margin-bottom:18px;
  flex-wrap:wrap;
  position:relative;
  z-index:6; /* nad overlay */
}

.section-title {
  font-family: "Playfair Display", serif;
  font-size: clamp(1.4rem, 2.4vw, 2.4rem);
  margin: 0;
  color: var(--ink);
  -webkit-font-smoothing: antialiased;
  text-shadow: 0 2px 0 rgba(255,255,255,0.08), 0 -2px 8px rgba(0,0,0,0.12);
}
.section-title span { 
  background: linear-gradient(180deg, var(--gold-1), var(--gold-2));
  -webkit-background-clip: text; background-clip: text;
  color: transparent;
  font-weight:800;
}

.search-row { display:flex; gap:10px; align-items:center; margin-top:8px; z-index:6; }
#unifiedSearch {
  padding:10px 12px;
  min-width:260px;
  border-radius:10px;
  background: var(--paper-bg-tint);
  border:1px solid rgba(0,0,0,0.06);
  color:var(--ink);
  transition: box-shadow var(--transition), transform 120ms;
}
#unifiedSearch:focus { outline:none; box-shadow: 0 10px 30px rgba(0,0,0,0.18); transform: translateY(-2px); }

/* promo note - small */
.promo-note { color:var(--ink); opacity:0.86; font-weight:600; }

/* ======================== GRID (4/3/2/1) ======================== */
.books-grid {
  display:grid;
  gap:22px;
  grid-template-columns: repeat(1,1fr);
  align-items:start;
  position:relative;
  z-index:6; /* nad texturou & overlays */
  transition: all 320ms ease;
}

/* breakpoints */
@media (min-width:1200px) { .books-grid { grid-template-columns: repeat(4, 1fr); } }
@media (min-width:900px) and (max-width:1199px) { .books-grid { grid-template-columns: repeat(3, 1fr); } }
@media (min-width:700px) and (max-width:899px) { .books-grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width:699px) { .books-grid { grid-template-columns: repeat(1, 1fr); } }

/* ======================== KARTA KNIHY ======================== */
/* kartu urobíme nad papierom: vyššie z-indexy, svetlejší povrch, zlatený rám */
.book-card { perspective:1200px; opacity:1; transform:none; transition: transform 420ms ease, opacity 420ms ease; }
.card-inner {
  position: relative;
  z-index: 10; /* MUSÍ byť nad paper-wrap::after a ::before */
  background: linear-gradient(180deg, rgba(255,255,255,0.035), rgba(255,255,255,0.01));
  border-radius: var(--card-radius);
  overflow: visible;
  box-shadow:
    0 18px 60px rgba(0,0,0,0.48),
    inset 0 4px 12px rgba(255,255,255,0.02);
  transition: transform var(--transition), box-shadow var(--transition), filter var(--transition);
  display:flex; flex-direction:column;
  min-height:420px;
}

/* hover: jemný lift + tilt */
.card-inner:hover { transform: translateY(-10px) rotateX(0.6deg); box-shadow: 0 40px 110px rgba(0,0,0,0.6); }

/* meta badge */
.card-meta { position:absolute; margin:12px; z-index: 15; }
.badge { background: rgba(0,0,0,0.45); padding:6px 10px; border-radius:999px; color:var(--paper-bg-tint, #fff); font-weight:800; }

/* cover frame + zlacený bevel */
.cover-wrap { position:relative; overflow:visible; padding:14px; }
.book-cover {
  width:100%;
  height:320px;
  object-fit:cover;
  border-radius:8px;
  display:block;
  transform-origin:center;
  transition: transform 520ms cubic-bezier(.2,.9,.2,1), box-shadow var(--transition);
  backface-visibility:hidden;
  position:relative;
  z-index: 16; /* nad všetkým v karte */
  mix-blend-mode: normal;
}

/* gold frame dekor (pod obrázkom, ale viditeľný ako rámeček) */
.book-frame {
  position:absolute;
  inset:22px;
  border-radius:12px;
  pointer-events:none;
  z-index:12; /* medzi cover a card background */
  box-shadow:
    inset 0 2px 0 rgba(255,255,255,0.04),
    0 12px 36px rgba(0,0,0,0.5);
  background: linear-gradient(180deg, rgba(255,250,230,0.02), rgba(0,0,0,0.02));
}

/* info */
.card-info { padding:12px 16px 6px; display:flex; flex-direction:column; gap:8px; flex:1; z-index:14; }
.book-title { margin:0; font-size:1.05rem; color:var(--ink); font-weight:800; -webkit-font-smoothing:antialiased; }
.book-author { margin:0; color:var(--gold-3); font-weight:700; }
.book-desc { margin:0; color:var(--ink); opacity:0.86; line-height:1.45; font-size:.95rem; }

/* actions */
.card-actions { padding:12px 16px 18px; display:flex; gap:10px; align-items:center; z-index:14; }
.btn-outline { background:transparent; border:1px solid rgba(0,0,0,0.06); color:var(--ink); padding:8px 12px; border-radius:8px; font-weight:800; }
.btn-primary { background: linear-gradient(90deg,var(--gold-1),var(--gold-2)); color:var(--accent-dark); padding:8px 12px; border-radius:8px; font-weight:900; }

/* reveal helper (jemný) - karty zostanú viditeľné aj bez JS */
.book-card { opacity:1; transform:none; }
.book-card.revealed { opacity:1; transform:none; }

/* fade animation on grid swap */
.books-grid.fade-out { opacity:0.02; transform: translateY(6px); transition: opacity 220ms ease, transform 220ms ease; }
.books-grid.fade-in { opacity:1; transform:none; transition: opacity 420ms ease; }

/* modal */
.book-modal { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(6,4,3,0.6); z-index:99999; padding:20px; }
.book-modal[aria-hidden="false"] { display:flex; }
.modal-inner { width:min(980px,96%); background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.02)); border-radius:12px; padding:16px; box-shadow:0 30px 90px rgba(0,0,0,0.65); display:flex; gap:18px; align-items:flex-start; }
.modal-inner img { width:320px; height:420px; object-fit:cover; border-radius:8px; }
.modal-inner .modal-info { color:var(--ink); }

/* small screens adjustments */
@media (max-width:900px) {
  .card-inner { min-height: 360px; }
  .book-cover { height: 240px; }
  .modal-inner { flex-direction:column; align-items:center; }
  .modal-inner img { width:100%; height:auto; max-height:420px; }
}

/* reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; transform: none !important; }
}
